(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{401:function(t,a,r){"use strict";r.r(a);var e=r(45),s=Object(e.a)({},(function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"序列号管理"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#序列号管理"}},[t._v("#")]),t._v(" 序列号管理")]),t._v(" "),r("p",[t._v("本文通过产品编码和订单流水号介绍一下序列号(Sequence)在crudapi中的应用。")]),t._v(" "),r("h3",{attrs:{id:"概要"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#概要"}},[t._v("#")]),t._v(" 概要")]),t._v(" "),r("h4",{attrs:{id:"序列号"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#序列号"}},[t._v("#")]),t._v(" 序列号")]),t._v(" "),r("p",[t._v("MySQL数据库没有单独的Sequence，只支持自增长(increment)主键，但是不能设置步长、开始索引、格式等，最重要的是一张表只能由一个字段使用自增，但有的时候我们需要多个字段实现序列号功能或者需要支持复杂格式，MySQL本身是实现不了的，所以crudapi封装了复杂序列号，支持字符串和数字，自定义格式，也可以设置为时间戳。可以用于产品编码、订单流水号等场景！")]),t._v(" "),r("h3",{attrs:{id:"配置序列号"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#配置序列号"}},[t._v("#")]),t._v(" 配置序列号")]),t._v(" "),r("h4",{attrs:{id:"产品编码"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#产品编码"}},[t._v("#")]),t._v(" 产品编码")]),t._v(" "),r("p",[r("img",{attrs:{src:"/img/metadata/sequence/productCode.png",alt:"productCode"}}),t._v("\n产品编码采用字符串方式，格式为：PROD_%09d，表示长度为9，宽度不足用0补齐，最小值从1开始， 最大值为999999999，下一个值为1，步长为1。")]),t._v(" "),r("h4",{attrs:{id:"销售订单流水号"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#销售订单流水号"}},[t._v("#")]),t._v(" 销售订单流水号")]),t._v(" "),r("p",[r("img",{attrs:{src:"/img/metadata/sequence/salesOrderCode.png",alt:"salesOrderCode"}}),t._v("\n产品编码采用时间戳方式，格式为：'SO'yyyyMMddHHmmssSSS，SO表示前缀，精确到年月日时分秒毫秒")]),t._v(" "),r("h3",{attrs:{id:"表定义配置序列号属性"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#表定义配置序列号属性"}},[t._v("#")]),t._v(" 表定义配置序列号属性")]),t._v(" "),r("h4",{attrs:{id:"产品编码-2"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#产品编码-2"}},[t._v("#")]),t._v(" 产品编码")]),t._v(" "),r("p",[r("img",{attrs:{src:"/img/metadata/sequence/product.png",alt:"product"}}),t._v("\n产品表配置序列号字段")]),t._v(" "),r("h4",{attrs:{id:"销售订单流水号-2"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#销售订单流水号-2"}},[t._v("#")]),t._v(" 销售订单流水号")]),t._v(" "),r("p",[r("img",{attrs:{src:"/img/metadata/sequence/salesOrder.png",alt:"salesOrder"}}),t._v("\n销售订单表配置序列号字段")]),t._v(" "),r("h3",{attrs:{id:"验证序列号功能"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#验证序列号功能"}},[t._v("#")]),t._v(" 验证序列号功能")]),t._v(" "),r("h4",{attrs:{id:"产品"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#产品"}},[t._v("#")]),t._v(" 产品")]),t._v(" "),r("p",[r("img",{attrs:{src:"/img/metadata/sequence/createProduct.png",alt:"createProduct"}}),t._v("\n通过ui创建产品，因为编码字段设置了序列号，所以留空，这样后台会自动生成编码，如果编码字段手工输入，就以手工输入地值为准。")]),t._v(" "),r("p",[r("img",{attrs:{src:"/img/metadata/sequence/editProuct.png",alt:"editProuct"}}),t._v("\n生成的编码为PROD_000000001，和期望的一致。")]),t._v(" "),r("h4",{attrs:{id:"销售订单"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#销售订单"}},[t._v("#")]),t._v(" 销售订单")]),t._v(" "),r("p",[r("img",{attrs:{src:"/img/metadata/sequence/createSalesOrder.png",alt:"createSalesOrder"}}),t._v("\n通过Postman创建销售订单")]),t._v(" "),r("p",[r("img",{attrs:{src:"/img/metadata/sequence/salesOrderList.png",alt:"salesOrderList"}}),t._v("\nui查看订单列表，流水号发现SO20210212110955912生成成功")]),t._v(" "),r("h3",{attrs:{id:"高级"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#高级"}},[t._v("#")]),t._v(" 高级")]),t._v(" "),r("h3",{attrs:{id:"序列号api"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#序列号api"}},[t._v("#")]),t._v(" 序列号API")]),t._v(" "),r("p",[r("img",{attrs:{src:"/img/metadata/sequence/getnextseq.png",alt:"getnextseq"}}),t._v("\n序列号提供了获取下一个值功能的API，适合UI定制的场景，显式的把值显示在ui上，这样更加直观，但是如果用户不点保存或者保存失败的话，可能会浪费值。查看swagger文档：\n"),r("a",{attrs:{href:"https://demo.crudapi.cn/swagger-ui.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://demo.crudapi.cn/swagger-ui.html"),r("OutboundLink")],1)]),t._v(" "),r("h3",{attrs:{id:"验证"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#验证"}},[t._v("#")]),t._v(" 验证")]),t._v(" "),r("p",[r("img",{attrs:{src:"/img/metadata/sequence/postmangetnextseq.png",alt:"postmangetnextseq"}}),t._v("\n通过Postman获取到下一个值为PROD_000000002")]),t._v(" "),r("h3",{attrs:{id:"小结"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[t._v("#")]),t._v(" 小结")]),t._v(" "),r("p",[t._v("本文通过配置序列号的方式实现了特定字段的自动赋值功能，无需编码，并且支持二次开发。目前有点不完善的地方，产品和销售订单都是孤立的单表，后续会介绍如果配置表关系，实现一对多，一对一，多对多等主子表。")]),t._v(" "),r("h3",{attrs:{id:"附demo演示"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#附demo演示"}},[t._v("#")]),t._v(" 附demo演示")]),t._v(" "),r("p",[t._v("本系统属于产品级的零代码平台，不同于自动代码生成器，不需要生成Controller、Service、Repository、Entity等业务代码，程序运行起来就可以使用，真正0代码，可以覆盖基本的和业务无关的CRUD RESTful API。")]),t._v(" "),r("p",[t._v("官网地址："),r("a",{attrs:{href:"https://crudapi.cn",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://crudapi.cn"),r("OutboundLink")],1),r("br"),t._v("\n测试地址："),r("a",{attrs:{href:"https://demo.crudapi.cn/crudapi/login",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://demo.crudapi.cn/crudapi/login"),r("OutboundLink")],1)]),t._v(" "),r("h3",{attrs:{id:"目录"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#目录"}},[t._v("#")]),t._v(" 目录")]),t._v(" "),r("h4",{attrs:{id:"crudapi系列一-入门"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#crudapi系列一-入门"}},[t._v("#")]),t._v(" "),r("RouterLink",{attrs:{to:"/helloworld.html"}},[t._v("crudapi系列一 入门")])],1),t._v(" "),r("h4",{attrs:{id:"crudapi系列二-序列号"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#crudapi系列二-序列号"}},[t._v("#")]),t._v(" "),r("RouterLink",{attrs:{to:"/sequence.html"}},[t._v("crudapi系列二 序列号")])],1),t._v(" "),r("h4",{attrs:{id:"crudapi系列三-表关系"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#crudapi系列三-表关系"}},[t._v("#")]),t._v(" "),r("RouterLink",{attrs:{to:"/relation.html"}},[t._v("crudapi系列三 表关系")])],1),t._v(" "),r("h4",{attrs:{id:"crudapi系列四-表关系高阶"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#crudapi系列四-表关系高阶"}},[t._v("#")]),t._v(" "),r("RouterLink",{attrs:{to:"/relations.html"}},[t._v("crudapi系列四 表关系高阶")])],1),t._v(" "),r("h4",{attrs:{id:"crudapi系列五-数据条件查询和分页"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#crudapi系列五-数据条件查询和分页"}},[t._v("#")]),t._v(" "),r("RouterLink",{attrs:{to:"/dataquery.html"}},[t._v("crudapi系列五 数据条件查询和分页")])],1),t._v(" "),r("h4",{attrs:{id:"crudapi系列六-rbac权限模型"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#crudapi系列六-rbac权限模型"}},[t._v("#")]),t._v(" "),r("RouterLink",{attrs:{to:"/rbac.html"}},[t._v("crudapi系列六 RBAC权限模型")])],1),t._v(" "),r("h4",{attrs:{id:"crudapi系列七-表单设计"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#crudapi系列七-表单设计"}},[t._v("#")]),t._v(" "),r("RouterLink",{attrs:{to:"/table.html"}},[t._v("crudapi系列七 表单设计")])],1),t._v(" "),r("h4",{attrs:{id:"crudapi系列八-应用场景"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#crudapi系列八-应用场景"}},[t._v("#")]),t._v(" "),r("RouterLink",{attrs:{to:"/scenario.html"}},[t._v("crudapi系列八 应用场景")])],1)])}),[],!1,null,null,null);a.default=s.exports}}]);
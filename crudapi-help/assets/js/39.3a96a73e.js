(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{399:function(t,a,r){"use strict";r.r(a);var s=r(45),e=Object(s.a)({},(function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"表关系高阶"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#表关系高阶"}},[t._v("#")]),t._v(" 表关系高阶")]),t._v(" "),r("p",[t._v("在上一篇"),r("RouterLink",{attrs:{to:"/relation.html"}},[t._v(" 表关系管理 ")]),t._v("中，介绍了订单中一对多、多对一、以及多对多关系，本文主要介绍一对一关系和无限主子表在crudapi系统中的应用。")],1),t._v(" "),r("h3",{attrs:{id:"概要"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#概要"}},[t._v("#")]),t._v(" 概要")]),t._v(" "),r("h4",{attrs:{id:"一对一"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#一对一"}},[t._v("#")]),t._v(" 一对一")]),t._v(" "),r("p",[t._v("一对一关系是指关系数据库中两个表之间的一种关系。关系数据库中第一个表中的单个行只可以与第二个表中的一个行相关，且第二个表中的一个行也只可以与第一个表中的一个行相关。"),r("br"),t._v("\n在一对多关系中，外键建立在子表中；在一对一关系中，外键可以建在主表或者子表中，为了保持一致，crudapi系统中统一将一对一关系中外键也建立在子表中，这样的好处是如果将来需要解除表关系的时候，无需修改主表结构。")]),t._v(" "),r("h4",{attrs:{id:"客户资料"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#客户资料"}},[t._v("#")]),t._v(" 客户资料")]),t._v(" "),r("p",[t._v("客户customer主表中，通常存放基本信息，如果有更多资料可以考虑单独存放在客户资料customerProfile表中，它们之间可以用一对一关系实现。")]),t._v(" "),r("h4",{attrs:{id:"客户和客户资料-一对一-主子方向"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#客户和客户资料-一对一-主子方向"}},[t._v("#")]),t._v(" 客户和客户资料：一对一（主子方向）")]),t._v(" "),r("p",[r("img",{attrs:{src:"/img/metadata/relation/customer.png",alt:"customer"}}),t._v("\n之前创建客户customer表保持不变")]),t._v(" "),r("p",[r("img",{attrs:{src:"/img/metadata/relations/customerProfile.png",alt:"customerProfile"}}),t._v("\n创建客户资料customerProfile表，主要包括客户编号字段、生日、性别、爱好等，其中客户编号customerId字段用于建立表关系")]),t._v(" "),r("p",[r("img",{attrs:{src:"/img/metadata/relations/profileRelation.png",alt:"profileRelation"}}),t._v("\n建立主子方向一对一关系，客户customer表的编号id字段，指向客户资料customerProfile的客户编号customerId字段，关系的英文名称profile用于查询关联对象的时候，设置导航属性名称为profile。")]),t._v(" "),r("h4",{attrs:{id:"客户资料和客户-一对一-子主方向"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#客户资料和客户-一对一-子主方向"}},[t._v("#")]),t._v(" 客户资料和客户：一对一（子主方向）")]),t._v(" "),r("p",[r("img",{attrs:{src:"/img/metadata/relations/customerRelation.png",alt:"customerRelation"}}),t._v("\n建立子主方向一对一关系，客户资料customerProfile的客户编号customerId字段，指向客户customer表的编号id字段，关系的英文名称customer用于查询关联对象的时候，设置导航属性名称为customer，和之前订单和客户多对一关系有点类似，关联对象都是customer对象，不过那个时候多个订单可以关联同一个客户，现在一个客户资料只能关联一个客户。")]),t._v(" "),r("h4",{attrs:{id:"客户主子表级联保存"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#客户主子表级联保存"}},[t._v("#")]),t._v(" 客户主子表级联保存")]),t._v(" "),r("p",[r("img",{attrs:{src:"/img/metadata/relations/createCustomer.png",alt:"createCustomer"}}),t._v("\nui创建客户，同时输入子表客户资料信息，chrome打开网络请求记录，可以看到POST body如下：")]),t._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"刘备"')]),t._v(",\n    "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mobile"')]),r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"13699998888"')]),t._v(",\n    "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"email"')]),r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"liubei@crudapi.cn"')]),t._v(",\n    "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"profile"')]),r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"刘备资料"')]),t._v(",\n        "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"birthday"')]),r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2021-02-14"')]),t._v(",\n        "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sex"')]),r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"男"')]),t._v(",\n        "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hobby"')]),r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"骑马"')]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),r("p",[t._v("其中profile为客户资料信息，")]),t._v(" "),r("p",[r("img",{attrs:{src:"/img/metadata/relations/editCustomer.png",alt:"editCustomer"}}),t._v("\n查询客户详情，发现客户和客户资料信息一次性保存成功！上一篇文章中，销售订单和订单行是一对多主子关系，\n子表是数组形式，在一对一主子关系中子表是对象形式，在数据库中表现形式是相同的，外键都是建在子表中。")]),t._v(" "),r("h4",{attrs:{id:"直接操作客户资料"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#直接操作客户资料"}},[t._v("#")]),t._v(" 直接操作客户资料")]),t._v(" "),r("p",[r("img",{attrs:{src:"/img/metadata/relations/editCustomerProfile.png",alt:"editCustomerProfile"}}),t._v("\n也可以直接创建客户资料表，选择挂在指定客户下，可以达到同样的效果。")]),t._v(" "),r("h4",{attrs:{id:"无限子表"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#无限子表"}},[t._v("#")]),t._v(" 无限子表")]),t._v(" "),r("p",[t._v("通过设置表关系，一对多和一对一（主子方向）理论上可以无限关联下去，所有的表一次性级联保存，比如省市区通常可以达到3级子表，目录文件属于无限子表。")]),t._v(" "),r("h4",{attrs:{id:"省市区三级子表"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#省市区三级子表"}},[t._v("#")]),t._v(" 省市区三级子表")]),t._v(" "),r("p",[r("img",{attrs:{src:"/img/metadata/relations/ssqGraph.png",alt:"ssqGraph"}})]),t._v(" "),r("p",[t._v("省和市是一对多关系，市和区是一对多关系。")]),t._v(" "),r("p",[r("img",{attrs:{src:"/img/metadata/relations/ssq.png",alt:"ssq"}}),t._v("\nui效果，江苏省包括南京和淮安两个城市，南京市又包括江宁区和雨花台区。")]),t._v(" "),r("h4",{attrs:{id:"目录无限子表"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#目录无限子表"}},[t._v("#")]),t._v(" 目录无限子表")]),t._v(" "),r("p",[t._v("一级目录下可以包括子目录和文件，如果是子目录，子目录可以继续包括子目录和文件\n"),r("img",{attrs:{src:"/img/metadata/relations/folder1.png",alt:"folder1"}}),t._v("\n图目录无限子表-1")]),t._v(" "),r("p",[r("img",{attrs:{src:"/img/metadata/relations/folder2.png",alt:"folder2"}}),t._v("\n图目录无限子表-2")]),t._v(" "),r("p",[t._v("ui效果，子表包括目录和文件，还可以继续展开下去，由于屏幕大小的原因，这里就不一一展示了。")]),t._v(" "),r("p",[t._v("查询目录列表\n"),r("img",{attrs:{src:"/img/metadata/relations/folders.png",alt:"folders"}})]),t._v(" "),r("h3",{attrs:{id:"小结"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[t._v("#")]),t._v(" 小结")]),t._v(" "),r("p",[t._v("本文介绍了一对一关系，包括主子方向和子主方向，加上一篇文章中一对多，多对一，多对多关系，到目前为止所有的表关系都实现了。crudapi系统通过配置的方式实现了对象之间的关联，无需编程实现了主子表CRUD操作。")]),t._v(" "),r("h3",{attrs:{id:"附demo演示"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#附demo演示"}},[t._v("#")]),t._v(" 附demo演示")]),t._v(" "),r("p",[t._v("本系统属于产品级的零代码平台，不同于自动代码生成器，不需要生成Controller、Service、Repository、Entity等业务代码，程序运行起来就可以使用，真正0代码，可以覆盖基本的和业务无关的CRUD RESTful API。")]),t._v(" "),r("p",[t._v("官网地址："),r("a",{attrs:{href:"https://crudapi.cn",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://crudapi.cn"),r("OutboundLink")],1),r("br"),t._v("\n测试地址："),r("a",{attrs:{href:"https://demo.crudapi.cn/crudapi/login",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://demo.crudapi.cn/crudapi/login"),r("OutboundLink")],1)]),t._v(" "),r("h3",{attrs:{id:"目录"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#目录"}},[t._v("#")]),t._v(" 目录")]),t._v(" "),r("h4",{attrs:{id:"crudapi系列一-入门"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#crudapi系列一-入门"}},[t._v("#")]),t._v(" "),r("RouterLink",{attrs:{to:"/helloworld.html"}},[t._v("crudapi系列一 入门")])],1),t._v(" "),r("h4",{attrs:{id:"crudapi系列二-序列号"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#crudapi系列二-序列号"}},[t._v("#")]),t._v(" "),r("RouterLink",{attrs:{to:"/sequence.html"}},[t._v("crudapi系列二 序列号")])],1),t._v(" "),r("h4",{attrs:{id:"crudapi系列三-表关系"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#crudapi系列三-表关系"}},[t._v("#")]),t._v(" "),r("RouterLink",{attrs:{to:"/relation.html"}},[t._v("crudapi系列三 表关系")])],1),t._v(" "),r("h4",{attrs:{id:"crudapi系列四-表关系高阶"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#crudapi系列四-表关系高阶"}},[t._v("#")]),t._v(" "),r("RouterLink",{attrs:{to:"/relations.html"}},[t._v("crudapi系列四 表关系高阶")])],1),t._v(" "),r("h4",{attrs:{id:"crudapi系列五-数据条件查询和分页"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#crudapi系列五-数据条件查询和分页"}},[t._v("#")]),t._v(" "),r("RouterLink",{attrs:{to:"/dataquery.html"}},[t._v("crudapi系列五 数据条件查询和分页")])],1),t._v(" "),r("h4",{attrs:{id:"crudapi系列六-rbac权限模型"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#crudapi系列六-rbac权限模型"}},[t._v("#")]),t._v(" "),r("RouterLink",{attrs:{to:"/rbac.html"}},[t._v("crudapi系列六 RBAC权限模型")])],1),t._v(" "),r("h4",{attrs:{id:"crudapi系列七-表单设计"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#crudapi系列七-表单设计"}},[t._v("#")]),t._v(" "),r("RouterLink",{attrs:{to:"/table.html"}},[t._v("crudapi系列七 表单设计")])],1),t._v(" "),r("h4",{attrs:{id:"crudapi系列八-应用场景"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#crudapi系列八-应用场景"}},[t._v("#")]),t._v(" "),r("RouterLink",{attrs:{to:"/scenario.html"}},[t._v("crudapi系列八 应用场景")])],1),t._v(" "),r("h4",{attrs:{id:"crudapi系列九-多数据库支持"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#crudapi系列九-多数据库支持"}},[t._v("#")]),t._v(" "),r("RouterLink",{attrs:{to:"/database.html"}},[t._v("crudapi系列九 多数据库支持")])],1),t._v(" "),r("h4",{attrs:{id:"crudapi系列十-甲骨文oracle数据库"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#crudapi系列十-甲骨文oracle数据库"}},[t._v("#")]),t._v(" "),r("RouterLink",{attrs:{to:"/oracle.html"}},[t._v("crudapi系列十 甲骨文oracle数据库")])],1),t._v(" "),r("h4",{attrs:{id:"crudapi系列十一-微软mssql数据库"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#crudapi系列十一-微软mssql数据库"}},[t._v("#")]),t._v(" "),r("RouterLink",{attrs:{to:"/mssql.html"}},[t._v("crudapi系列十一 微软mssql数据库")])],1)])}),[],!1,null,null,null);a.default=e.exports}}]);